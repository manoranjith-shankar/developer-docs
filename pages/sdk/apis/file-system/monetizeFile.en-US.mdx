import { Callout } from 'nextra-theme-docs';

# monetizeFile

Monetize a file into a collection of NFTs, only NFT holders could access the file.
use this function to empower users&applications with the ability to earn from their data.

## Usage
```javascript
await runtimeConnector.monetizeFile({
  indexFileId,  // or streamId
  datatokenVars: {
    profileId,  // lens handle profile id
    collectLimit,
    amount,
    currency: Currency.WMATIC,
  },
  storageProvider,
  decryptionConditions: [
    {
      conditionType: "evmBasic",
      contractAddress: "",
      standardContractType: "",
      chain: "filecoin",
      method: "",
      parameters: [":userAddress"],
      returnValueTest: {
        comparator: "=",
        value: "0x3c6216caE32FF6691C55cb691766220Fd3f55555",
      }
    },
		{ "operator": "and" },
    [
       { ... },
       {"operator": "or"},
       { ... }
    ]
  ], // customize a ACL using FIL <-> collectors & "0x3c..." can unlock
});
```

## Parameters
```js
{
    streamId?: string;
    indexFileId?: string;
    datatokenVars: Omit<DatatokenVars, "streamId">;
    decryptionConditions?: DecryptionConditions;
    storageProvider?: storageProvider;
}
```
- `streamId`: `string` - stream id, pass in the stream id if you want to monetize a stream
- `indexFileId`: `string` - index file id, pass in the indexfile id if you want to monetize a file
- `datatokenVars`: `Omit<DatatokenVars, "streamId">` - configure the datatoken
    - `profileId`: `string` - lens profile id, generated by `getProfileId` function
    - `collectLimit`: `number` - the number of NFTs to be minted
    - `amount`: `number` - the price of each NFT
    - `currency`: `Currency` - NFTs can be bought in which token
    ```js
    enum Currency {
        USDC = "USDC",
        DAI = "DAI",
        WETH = "WETH",
        WMATIC = "WMATIC"
    }
    ```
- `decryptionConditions`: `DecryptionConditions` - decryption conditions configured to make sure only when these conditions are meet,
    an address can mint a `Collect NFT`
- `storageProvider`: `StorageProvider` - when you are monetizing a file which is an IPFS CID, you may choose
    to reupload the to IPFS via a custom upload provider such as [web3.storage](https://web3.storage/) or
     [lighthouse](https://www.lighthouse.storage/)

## Returns
```js
{
    streamContent?: StreamContent;
    currentFile: MirrorFile;
}
```
<Callout>
This function will ask users to sign a transaction to mint NFTs. Currently the transaction will be sent to mumbai.
And the monetized folder will be returned after the transaction is confirmed.
</Callout>